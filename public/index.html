<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emprego Lichinga - Vagas em Niassa, Moçambique</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Cabeçalho -->
    <header class="header">
        <div class="container">
            <nav>
                <div class="logo">
                    <i class="fas fa-briefcase"></i>
                    Emprego Lichinga <span>Niassa</span>
                </div>
                <div class="nav-links">
                    <a href="index.html"><i class="fas fa-home"></i> Início</a>
                    <a href="jobs.html"><i class="fas fa-search"></i> Buscar Vagas</a>
                    <a href="#como-funciona"><i class="fas fa-question-circle"></i> Como Funciona</a>
                    <a href="#contato"><i class="fas fa-phone"></i> Contato</a>
                    <a href="login.html" class="btn"><i class="fas fa-sign-in-alt"></i> Entrar</a>
                    <a href="register.html" class="btn btn-success"><i class="fas fa-user-plus"></i> Registrar</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Encontre Trabalho em Lichinga</h1>
            <p>Conectamos empregadores e candidatos na região de Niassa. Encontre oportunidades ou publique suas vagas gratuitamente.</p>
            <div style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <a href="jobs.html" class="btn btn-success" style="padding: 1rem 2rem;">
                    <i class="fas fa-search"></i> Buscar Vagas
                </a>
                <a href="post-job.html" class="btn" style="padding: 1rem 2rem;">
                    <i class="fas fa-plus"></i> Publicar Vaga
                </a>
            </div>
        </div>
    </section>

    <!-- Estatísticas -->
    <section class="container">
        <div class="card" style="margin-top: -2rem; position: relative; z-index: 10;">
            <div class="grid" id="statsContainer">
                <div class="stats-card">
                    <div class="stats-number">0</div>
                    <p>Vagas Ativas</p>
                </div>
                <div class="stats-card">
                    <div class="stats-number">0</div>
                    <p>Candidatos</p>
                </div>
                <div class="stats-card">
                    <div class="stats-number">0</div>
                    <p>Empregadores</p>
                </div>
                <div class="stats-card">
                    <div class="stats-number">0</div>
                    <p>Candidaturas</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Como Funciona -->
    <section id="como-funciona" class="container" style="margin-top: 4rem;">
        <h2 class="text-center mb-4">Como Funciona</h2>
        <div class="grid">
            <div class="card text-center">
                <div style="font-size: 3rem; color: #3498db; margin-bottom: 1rem;">
                    <i class="fas fa-user-plus"></i>
                </div>
                <h3>1. Crie sua Conta</h3>
                <p>Registre-se gratuitamente como candidato ou empregador</p>
            </div>
            
            <div class="card text-center">
                <div style="font-size: 3rem; color: #3498db; margin-bottom: 1rem;">
                    <i class="fas fa-search"></i>
                </div>
                <h3>2. Encontre Vagas</h3>
                <p>Busque oportunidades perto de você em Lichinga</p>
            </div>
            
            <div class="card text-center">
                <div style="font-size: 3rem; color: #3498db; margin-bottom: 1rem;">
                    <i class="fas fa-paper-plane"></i>
                </div>
                <h3>3. Candidate-se</h3>
                <p>Envie sua candidatura com um clique</p>
            </div>
            
            <div class="card text-center">
                <div style="font-size: 3rem; color: #3498db; margin-bottom: 1rem;">
                    <i class="fas fa-handshake"></i>
                </div>
                <h3>4. Conecte-se</h3>
                <p>Empregador entra em contato diretamente</p>
            </div>
        </div>
    </section>

    <!-- Vagas Recentes -->
    <section class="container" style="margin-top: 4rem;">
        <div class="flex" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <h2>Vagas Recentes em Lichinga</h2>
            <a href="jobs.html" class="btn btn-outline">Ver Todas</a>
        </div>
        
        <div class="grid" id="jobsContainer">
            <div class="loading">Carregando vagas...</div>
        </div>
    </section>

    <!-- Categorias Populares -->
    <section class="container" style="margin-top: 4rem;">
        <h2 class="text-center mb-4">Categorias Populares</h2>
        <div class="grid">
            <div class="card">
                <h3><i class="fas fa-store"></i> Vendas</h3>
                <p>Vendedores, atendentes, promotores</p>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-hard-hat"></i> Construção</h3>
                <p>Pedreiros, carpinteiros, ajudantes</p>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-truck"></i> Transporte</h3>
                <p>Motoristas, ajudantes, entregadores</p>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-leaf"></i> Agricultura</h3>
                <p>Trabalhadores rurais, colheitadeiras</p>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-user-md"></i> Saúde</h3>
                <p>Auxiliares, enfermeiros, atendentes</p>
            </div>
            
            <div class="card">
                <h3><i class="fas fa-graduation-cap"></i> Educação</h3>
                <p>Professores, monitores, auxiliares</p>
            </div>
        </div>
    </section>

    <!-- Por que escolher? -->
    <section class="container" style="margin-top: 4rem;">
        <div class="card p-4" style="background: linear-gradient(135deg, #f8f9fa, #e9ecef);">
            <h2 class="text-center mb-4">Por que escolher Emprego Lichinga?</h2>
            <div class="grid">
                <div class="text-center">
                    <i class="fas fa-check-circle" style="font-size: 2rem; color: #27ae60; margin-bottom: 1rem;"></i>
                    <h3>Grátis</h3>
                    <p>Sem custos para candidatos ou empregadores</p>
                </div>
                
                <div class="text-center">
                    <i class="fas fa-bolt" style="font-size: 2rem; color: #f39c12; margin-bottom: 1rem;"></i>
                    <h3>Rápido</h3>
                    <p>Candidaturas instantâneas</p>
                </div>
                
                <div class="text-center">
                    <i class="fas fa-map-marker-alt" style="font-size: 2rem; color: #e74c3c; margin-bottom: 1rem;"></i>
                    <h3>Local</h3>
                    <p>Focado em oportunidades em Lichinga</p>
                </div>
                
                <div class="text-center">
                    <i class="fas fa-shield-alt" style="font-size: 2rem; color: #3498db; margin-bottom: 1rem;"></i>
                    <h3>Seguro</h3>
                    <p>Dados protegidos e confiáveis</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Depoimentos -->
    <section class="container" style="margin-top: 4rem;">
        <h2 class="text-center mb-4">O que dizem nossos usuários</h2>
        <div class="grid">
            <div class="card">
                <p>"Encontrei trabalho como vendedor em uma loja no Mercado Central em apenas 2 dias!"</p>
                <p class="text-right mt-2"><strong>— João, 28 anos</strong></p>
            </div>
            
            <div class="card">
                <p>"Precisava de 3 ajudantes para minha obra. Publiquei a vaga e no mesmo dia já tinha candidatos."</p>
                <p class="text-right mt-2"><strong>— Carlos, Empresário</strong></p>
            </div>
            
            <div class="card">
                <p>"Como recém-chegada em Lichinga, essa plataforma me ajudou a encontrar meu primeiro trabalho aqui."</p>
                <p class="text-right mt-2"><strong>— Maria, 24 anos</strong></p>
            </div>
        </div>
    </section>

    <!-- CTA Final -->
    <section class="container" style="margin-top: 4rem;">
        <div class="card p-4 text-center" style="background: linear-gradient(135deg, #3498db, #2c3e50); color: white;">
            <h2>Comece Agora Mesmo!</h2>
            <p class="mb-4">Junte-se a centenas de pessoas que já encontraram oportunidades em Lichinga</p>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <a href="register.html" class="btn btn-success" style="padding: 1rem 2rem;">
                    <i class="fas fa-user-plus"></i> Criar Minha Conta
                </a>
                <a href="post-job.html" class="btn" style="padding: 1rem 2rem; background: white; color: #3498db;">
                    <i class="fas fa-plus"></i> Publicar Uma Vaga
                </a>
            </div>
        </div>
    </section>

    <!-- Rodapé -->
    <footer class="footer" id="contato">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Emprego Lichinga</h3>
                    <p>Conectando oportunidades em Niassa, Moçambique</p>
                    <p style="margin-top: 1rem;">
                        <i class="fas fa-map-marker-alt"></i> Lichinga, Niassa
                    </p>
                </div>
                
                <div class="footer-section">
                    <h3>Links Rápidos</h3>
                    <a href="index.html">Início</a>
                    <a href="jobs.html">Buscar Vagas</a>
                    <a href="post-job.html">Publicar Vaga</a>
                    <a href="login.html">Entrar</a>
                    <a href="register.html">Registrar</a>
                </div>
                
                <div class="footer-section">
                    <h3>Contato</h3>
                    <a href="tel:+258841234567"><i class="fas fa-phone"></i> +258 84 123 4567</a>
                    <a href="mailto:contato@empregolichinga.co.mz"><i class="fas fa-envelope"></i> contato@empregolichinga.co.mz</a>
                    <p style="margin-top: 1rem;">
                        <i class="fas fa-clock"></i> Suporte: Seg-Sex, 8h-18h
                    </p>
                </div>
                
                <div class="footer-section">
                    <h3>Siga-nos</h3>
                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <a href="#" style="font-size: 1.5rem;"><i class="fab fa-facebook"></i></a>
                        <a href="#" style="font-size: 1.5rem;"><i class="fab fa-whatsapp"></i></a>
                        <a href="#" style="font-size: 1.5rem;"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2024 Emprego Lichinga. Todos os direitos reservados.</p>
                <p>Desenvolvido para ajudar a comunidade de Lichinga</p>
            </div>
        </div>
    </footer>

    <script>
        // Carregar estatísticas
        async function loadStats() {
            try {
                const response = await fetch('/api/stats');
                const stats = await response.json();
                
                const statsElements = document.querySelectorAll('.stats-number');
                if (statsElements.length >= 4) {
                    statsElements[0].textContent = stats.totalJobs || '0';
                    statsElements[1].textContent = stats.totalUsers || '0';
                    // Estimativa: 70% candidatos, 30% empregadores
                    const employers = Math.round((stats.totalUsers || 0) * 0.3);
                    const candidates = (stats.totalUsers || 0) - employers;
                    statsElements[2].textContent = employers;
                    statsElements[3].textContent = stats.totalApplications || '0';
                }
            } catch (error) {
                console.error('Erro ao carregar estatísticas:', error);
            }
        }
        
        // Carregar vagas recentes
        async function loadRecentJobs() {
            try {
                const response = await fetch('/api/jobs?limit=6');
                const jobs = await response.json();
                
                const container = document.getElementById('jobsContainer');
                container.innerHTML = '';
                
                if (jobs.length === 0) {
                    container.innerHTML = '<div class="card text-center p-4"><p>Nenhuma vaga disponível no momento. Seja o primeiro a publicar!</p></div>';
                    return;
                }
                
                jobs.forEach(job => {
                    const vacanciesLeft = job.vacancies - job.filled;
                    const badgeClass = vacanciesLeft > 0 ? 'vacancy-available' : 'vacancy-full';
                    const badgeText = vacanciesLeft > 0 ? `${vacanciesLeft} vaga${vacanciesLeft !== 1 ? 's' : ''}` : 'Preenchida';
                    
                    const jobCard = document.createElement('div');
                    jobCard.className = 'card job-card fade-in';
                    jobCard.innerHTML = `
                        <h3>${job.title}</h3>
                        <p><i class="fas fa-building"></i> ${job.company}</p>
                        <p><i class="fas fa-map-marker-alt"></i> ${job.location}</p>
                        
                        <div class="job-meta">
                            <span><i class="fas fa-clock"></i> ${job.type}</span>
                            <span><i class="fas fa-money-bill-wave"></i> ${job.salary}</span>
                            <span class="vacancy-badge ${badgeClass}">${badgeText}</span>
                        </div>
                        
                        <p>${job.description.substring(0, 120)}...</p>
                        
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                            <a href="job-detail.html?id=${job._id}" class="btn" style="flex: 1; text-align: center;">
                                <i class="fas fa-eye"></i> Ver Detalhes
                            </a>
                        </div>
                    `;
                    
                    container.appendChild(jobCard);
                });
            } catch (error) {
                console.error('Erro ao carregar vagas:', error);
                document.getElementById('jobsContainer').innerHTML = `
                    <div class="card text-center p-4">
                        <p>Erro ao carregar vagas. Tente novamente mais tarde.</p>
                    </div>
                `;
            }
        }
        
        // Verificar se usuário está logado
        function checkAuth() {
            const user = localStorage.getItem('user');
            if (user) {
                // Atualizar botões de login/registro
                const navLinks = document.querySelector('.nav-links');
                if (navLinks) {
                    const userData = JSON.parse(user);
                    navLinks.innerHTML = `
                        <a href="index.html"><i class="fas fa-home"></i> Início</a>
                        <a href="jobs.html"><i class="fas fa-search"></i> Buscar Vagas</a>
                        <a href="dashboard.html"><i class="fas fa-user"></i> Meu Painel</a>
                        <button onclick="logout()" class="btn btn-danger">
                            <i class="fas fa-sign-out-alt"></i> Sair
                        </button>
                    `;
                }
            }
        }
        
        // Logout
        function logout() {
            localStorage.removeItem('user');
            window.location.reload();
        }
        
        // Carregar tudo quando página carregar
        document.addEventListener('DOMContentLoaded', function() {
            loadStats();
            loadRecentJobs();
            checkAuth();
            
            // Atualizar a cada 30 segundos
            setInterval(loadStats, 30000);
            setInterval(loadRecentJobs, 30000);
        });
    </script>
</body>
</html>